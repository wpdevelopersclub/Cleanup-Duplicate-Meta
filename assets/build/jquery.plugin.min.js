/*!
 * JavaScript|jQuery functions
 *
 * Load into cleanupDupMeta namespace
 *
 * @package     Cleanup_Dup_Meta
 * @since       1.0.0
 * @author      WP Developers Club and Tonya
 * @link        http://wpdevelopersclub.com/wordpress-plugins/cleanup-duplicate-meta/
 * @license     GNU General Public License 2.0+
 * @copyright   2015 WP Developers Club
 */
!function(e,n,t,a){"use_strict";function u(){e.each(f.buttons,function(n,t){e.each(t,function(e,t){t.data("_cleanup_dups_meta",{type:n,buttonType:e,data:r(n,e+"_duplicate_"+n),isUserMeta:"usermeta"===n?!0:!1}),o(t,this)})})}function o(n,t){n.bind("click.cleanupDupMeta",e.proxy(s,t))}function c(e){e.unbind("click.cleanupDupMeta",s)}function s(n){var t=e(this).data("_cleanup_dups_meta");return t.isUserMeta=!0===t.isUserMeta?!0:!1,t.data.keep_first=f.containers[t.type].find("input[name=cleanup-dup-meta-keep]:checked").val(),i(e(this),t),!1}function i(n,t){var a=f.containers[t.type].find(".message-"+t.buttonType);return e.ajax({type:"POST",url:f.params.ajaxurl,data:t.data,beforeSend:function(e){p(!0),m(!0,t.isUserMeta)}}).done(function(e){a.find("span").text(e),a.show()}).fail(function(e,n,t){a.hide(),console.log("something went wrong")}).always(function(){m(!1,t.isUserMeta),p(!1)}),!1}function r(e,n){var t=f.containers[e];return{security:t.find("#_wpnonce").val(),action:n,keep_first:t.find("input[name=cleanup-dup-meta-keep]:checked").val()}}function p(n){return e.each(f.buttons,function(t,a){e.each(a,function(e,t){n?d(t):l(t,this)})}),!1}function d(e){return c(e),e.prop("readonly",!0).css("background-color","#ccc"),e=null,!1}function l(e,n){return o(e,n),e.prop("readonly",!1).removeAttr("style"),e=null,!1}function m(e,n){var t=n?"usermeta":"postmeta";return f.loadingImgs[t].toggle(e),!1}var f=f||{};f.init=function(){f.containers={postmeta:e(".cleanup-dup-postmeta-container"),usermeta:e(".cleanup-dup-usermeta-container")},f.buttons={postmeta:{cleanup:e("#cleanup-dup-postmeta"),count:e("#cleanup-dup-postmeta-count")},usermeta:{cleanup:e("#cleanup-dup-usermeta"),count:e("#cleanup-dup-usermeta-count")}},f.loadingImgs={postmeta:f.containers.postmeta.find(".status img"),usermeta:f.containers.usermeta.find(".status img")},u()},e(t).ready(function(){"undefined"==typeof cleanup_dup_meta_params?console.log("Whoops, local params not passed from WordPress."):(f.params=cleanup_dup_meta_params,f.init())})}(jQuery,window,document);