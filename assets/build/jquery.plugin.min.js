/*!
 * JavaScript|jQuery functions
 *
 * Load into cleanupDupMeta namespace
 *
 * @package     Cleanup_Dup_Meta
 * @since       1.0.1
 * @author      WP Developers Club and Tonya
 * @link        http://wpdevelopersclub.com/wordpress-plugins/cleanup-duplicate-meta/
 * @license     GNU General Public License 2.0+
 * @copyright   2015 WP Developers Club
 */
!function(e,t,n,a){"use_strict";function u(){e.each(f.buttons,function(t,n){e.each(n,function(e,n){n.data("_cleanup_dups_meta",{type:t,buttonType:e,data:p(t,n.data("action")),isUserMeta:"usermeta"===t?!0:!1}),o(n,this)})})}function o(t,n){t.bind("click.cleanupDupMeta",e.proxy(s,n))}function c(e){e.unbind("click.cleanupDupMeta",s)}function s(t){var n=e(this).data("_cleanup_dups_meta");return n.isUserMeta=!0===n.isUserMeta?!0:!1,n.data.keep_first=f.containers[n.type].find("input[name=cleanup-dup-meta-keep]:checked").val(),r(e(this),n),!1}function r(t,n){var a=f.containers[n.type].find(".message-"+n.buttonType);return e.ajax({type:"POST",url:f.params.ajaxurl,data:n.data,beforeSend:function(e){i(!0),m(!0,n.isUserMeta)}}).done(function(e){"query"==n.buttonType?a.html(e):(a.find("span").text(e),a.show())}).fail(function(e,t,n){a.hide(),console.log("something went wrong")}).always(function(){m(!1,n.isUserMeta),i(!1)}),!1}function p(e,t){var n=f.containers[e];return{security:n.find("#_wpnonce").val(),action:t,keep_first:n.find("input[name=cleanup-dup-meta-keep]:checked").val()}}function i(t){return e.each(f.buttons,function(n,a){e.each(a,function(e,n){t?d(n):l(n,this)})}),!1}function d(e){return c(e),e.prop("readonly",!0).css("background-color","#ccc"),e=null,!1}function l(e,t){return o(e,t),e.prop("readonly",!1).removeAttr("style"),e=null,!1}function m(e,t){var n=t?"usermeta":"postmeta";return f.loadingImgs[n].toggle(e),!1}var f=f||{};f.init=function(){f.containers={postmeta:e(".cleanup-dup-postmeta-container"),usermeta:e(".cleanup-dup-usermeta-container")},f.buttons={postmeta:{cleanup:e("#cleanup-dup-postmeta"),count:e("#cleanup-dup-postmeta-count"),query:e("#cleanup-dup-postmeta-query")},usermeta:{cleanup:e("#cleanup-dup-usermeta"),count:e("#cleanup-dup-usermeta-count"),query:e("#cleanup-dup-usermeta-query")}},f.loadingImgs={postmeta:f.containers.postmeta.find(".status img"),usermeta:f.containers.usermeta.find(".status img")},u()},e(n).ready(function(){"undefined"==typeof cleanup_dup_meta_params?console.log("Whoops, local params not passed from WordPress."):(f.params=cleanup_dup_meta_params,f.init())})}(jQuery,window,document);